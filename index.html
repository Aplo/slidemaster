<!DOCTYPE html>
<html>
  <head>
    <title>Slidemaster</title>
    <style type="text/css">
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    #content {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
    }

    .frame {
      border: 0;
      width: 100%;
      height: 100%;
    }

    #loading {
      display: none;
    }
    </style>
  </head>
  <body>
    <div id="content">
      <iframe class="frame" id="loading" allowfullscreen="true"></iframe>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      function unhide() {
        $("#loading").removeAttr('id');
      }

      var current = 1;
      var first = true;
      var sid = '1-Ao3Sg8qNsZYvUQR19CJXz3NYX2XwN-wYxgFa6WUyNo';

      var socket = io();
      function next() {
        socket.emit('slide', current + 1);
      }
      function previous() {
        socket.emit('slide', current - 1);
      }
      socket.on('slide', function(num){
        if (first) {
          console.log("first" + num);
          $('.frame').attr('src', 'http://docs.google.com/presentation/embed?id=' + sid + '&slide=' + current);
          first = false;
        }

        current = num;
        $("#content").prepend("<iframe id='loading' class='frame' src='http://docs.google.com/presentation/embed?id=" + sid + "&slide=" + current + "' allowfullscreen='true' onload='unhide();'></iframe>");
      });
    </script>
  </body>
</html>
